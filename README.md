# 💰 キャスト収益シミュレーター

風俗業界で働くキャストさんの収入を簡単に計算・シミュレーションできるWebツールです。  
**3つの計算方法**（本数ベース・時給ベース・目標金額逆算）から選択可能。収益を視覚的に理解できるグラフ機能も搭載しています。

![Version](https://img.shields.io/badge/version-4.1.0-pink)
![License](https://img.shields.io/badge/license-MIT-blue)
![Status](https://img.shields.io/badge/status-active-success)

---

## 🎯 プロジェクト概要

### 目的
風俗業界で働くキャストさんが、自分の収入を簡単に計算・予測できるツールを提供。2つの計算方法から選択でき、生活費を差し引いた「実際に貯金できる額」を可視化し、グラフで収益を直感的に理解できます。

### 主な機能
- ✅ **3つの計算方法**：本数ベース計算 / 時給ベース計算 / 目標金額逆算を切り替え可能
- ✅ **本数ベース計算**：1本あたりの単価と本数で収益を計算
- ✅ **時給ベース計算**：時給 + 待機時間（時給の50%）で収益を計算
- ✅ **目標金額逆算** 🆕：目標貯金額から必要な勤務条件を自動計算
- ✅ **リアルタイム収益計算**：入力値を変更すると即座に計算結果が更新
- ✅ **多段階表示**：日給・週給・月給・年収を一度に表示
- ✅ **生活費管理**：月の固定費（家賃・食費等）を入力して貯金可能額を計算
- ✅ **貯金額表示**：手取りから固定費を引いた実際の貯金可能額を表示
- ✅ **グラフ機能**：円グラフと棒グラフ、目標達成グラフで収益を視覚化（Chart.js使用）
- ✅ **ダウンロード機能**：Excel形式で計算結果を保存可能
- ✅ **レスポンシブデザイン**：スマホ・タブレット・PCで快適に利用可能

---

## 📋 現在実装済みの機能

### 1. 計算方法の切り替え
- **タブUI**でワンクリック切り替え
- **本数計算モード**：1本あたりの単価 × 本数
- **時給計算モード**：時給 × 勤務時間 + 待機時間（時給の50%）
- **目標金額モード** 🆕：目標貯金額から必要な勤務条件を逆算

### 2. 本数ベース収益計算
- **本数ベース計算**：1本あたりの単価 × 本数 = 日給
- **週給計算**：日給 × 週の勤務日数
- **月給計算**：週給 × 4.33週（1ヶ月の平均週数）
- **年収見込み**：手取り月給 × 12ヶ月
- **月間総本数表示**：月に何本こなしているか自動計算

### 3. 時給ベース収益計算 🆕
- **時給計算**：時給 × 勤務時間
- **待機時間計算**：待機時間 × 時給の50%
- **日給計算**：勤務給 + 待機給
- **週給・月給・年収**：本数ベースと同じロジックで計算

### 4. 生活費・貯金計算機能
- **月の固定費入力**：家賃、食費、光熱費、通信費、美容代などの合計
- **貯金可能額計算**：手取り月給 - 固定費 = 貯金可能額
- **年間貯金額予測**：月の貯金可能額 × 12ヶ月

### 5. グラフ機能
- **円グラフ**：月収、固定費、貯金可能額の内訳を視覚化
- **棒グラフ**：12ヶ月分の収入推移を表示
- **累積貯金グラフ**：貯金額の増加推移を可視化
- **目標達成グラフ** 🆕：目標金額までの貯金推移と達成ラインを表示
- **Chart.js使用**：美しく見やすいグラフ表示
- **リアルタイム更新**：入力値を変更するとグラフも即座に更新

### 6. 目標金額逆算機能 🆕
- **目標金額入力**：貯めたい目標金額を設定
- **達成期間設定**：何ヶ月で達成したいかを指定
- **逆算計算**：必要な月収、勤務日数、日給を自動計算
- **達成プラン表示**：毎月の必要貯金額、必要な勤務条件を明確化
- **達成イメージ**：1ヶ月後、3ヶ月後、6ヶ月後の貯金額を表示
- **目標達成グラフ**：累積貯金と目標ラインを視覚的に比較

### 7. ダウンロード機能
- **Excel出力**：表形式でデータを整理してExcelファイルとして保存
- **全モード対応**：本数ベース、時給ベース、目標金額逆算の全ての結果を保存可能
- **用途**：面接時の条件確認、収支計画の記録、税務資料など

### 8. UI機能
- **リアルタイム更新**：入力フォームの値が変わると自動再計算
- **カード型表示**：日給、週給、月給、手取り、年収、固定費、貯金額を個別カード表示
- **収益内訳**：単価、本数、勤務日数の詳細表示
- **アニメーション**：計算時のフェードインアニメーション
- **目標達成プラン表示** 🆕：必要な勤務条件を見やすく整理して表示

---

## 🚀 使い方

### 本数ベース計算の場合

1. **「本数計算」タブを選択**
2. **1本あたりの単価を入力**：あなたの1本あたりの報酬（円）
3. **1日の本数を入力**：1日に何本接客するか
4. **勤務日数を入力**：週に何日働くか
5. **月の固定費を入力**（任意）：家賃、食費などの合計
6. **自動計算**：入力すると自動で収益と貯金可能額、グラフが更新されます

### 時給ベース計算の場合

1. **「時給計算」タブを選択**
2. **時給を入力**：あなたの時給（円）
3. **1日の勤務時間を入力**：実際に働く時間
4. **1日の待機時間を入力**：待機時間（時給の50%で計算）
5. **勤務日数を入力**：週に何日働くか
6. **月の固定費を入力**（任意）：家賃、食費などの合計
7. **自動計算**：入力すると自動で収益と貯金可能額、グラフが更新されます

### 目標金額逆算の場合 🆕

1. **「目標金額」タブを選択**
2. **目標金額を入力**：貯めたい金額（円）
3. **達成期間を入力**：何ヶ月で達成したいか
4. **1本あたりの単価を入力**：あなたの単価
5. **1日の本数を入力**：1日に何本接客するか
6. **月の固定費を入力**：家賃、食費などの合計
7. **目標達成プランを計算**ボタンをクリック
8. **結果を確認**：必要な勤務日数、日給、達成プランが表示されます

### グラフの見方

- **円グラフ**：月収、固定費、貯金可能額の割合が一目でわかる
- **棒グラフ**：1年間の収入推移を視覚的に確認できる
- **累積貯金グラフ**：貯金額の増加推移を確認
- **目標達成グラフ** 🆕：累積貯金と目標ラインを比較して達成度を視覚化
- マウスオーバーで詳細な金額を表示

### ダウンロード

- **Excelボタン**をクリックして結果を保存
- 面接資料、収支計画、税務資料として活用可能
- 全ての計算モード（本数ベース、時給ベース、目標金額逆算）に対応

---

## 📊 計算式の詳細

### 本数ベース計算
```
日給 = 単価 × 本数
週給 = 日給 × 週の勤務日数
月給（基本） = 週給 × 4.33週
貯金可能額 = 月給 - 月の固定費
年収見込み = 月給 × 12ヶ月
```

### 時給ベース計算
```
勤務給 = 時給 × 勤務時間
待機給 = 時給 × 0.5 × 待機時間
日給 = 勤務給 + 待機給
週給 = 日給 × 週の勤務日数
月給（基本） = 週給 × 4.33週
貯金可能額 = 月給 - 月の固定費
年収見込み = 月給 × 12ヶ月
```

### 目標金額逆算 🆕
```
毎月の必要貯金額 = 目標金額 ÷ 達成期間（月）
必要な月収 = 毎月の必要貯金額 + 月の固定費
日給 = 単価 × 本数
必要な週の勤務日数 = 必要な月収 ÷ (日給 × 4.33週)
必要な月の勤務日数 = 必要な週の勤務日数 × 4.33週
予想年収 = 必要な月収 × 12ヶ月
```

---

## 📂 ファイル構成

```
project/
├── index.html          # メインHTMLファイル
├── css/
│   └── style.css      # スタイルシート
├── js/
│   └── main.js        # JavaScript（計算ロジック・グラフ・ダウンロード機能）
└── README.md          # このファイル
```

---

## 🎨 技術スタック

### フロントエンド
- **HTML5**：セマンティックなマークアップ
- **CSS3**：グラデーション、アニメーション、レスポンシブデザイン
- **JavaScript (ES6+)**：リアルタイム計算、DOM操作、モード切り替え

### ライブラリ・CDN
- **Chart.js 4.4.0**：グラフ描画ライブラリ 🆕
- **Font Awesome**：アイコンライブラリ
- **Google Fonts (Noto Sans JP)**：日本語フォント
- **jsPDF**：PDF生成ライブラリ
- **SheetJS (xlsx)**：Excel生成ライブラリ
- **FileSaver.js**：ファイル保存ライブラリ

---

## 📱 対応デバイス

- ✅ **デスクトップ**：1024px以上
- ✅ **タブレット**：768px〜1024px
- ✅ **スマートフォン**：〜768px

---

## 💡 使用例

### ケース1：本数ベース - 初心者キャスト
- **単価**: ¥8,000
- **1日の本数**: 2本
- **週の勤務日数**: 4日
- **月の固定費**: ¥100,000
- **結果**: 月収約¥277,000、貯金可能額約¥177,000

### ケース2：本数ベース - スタンダードキャスト
- **単価**: ¥10,000
- **1日の本数**: 3本
- **週の勤務日数**: 5日
- **月の固定費**: ¥150,000
- **結果**: 月収約¥650,000、貯金可能額約¥500,000

### ケース3：時給ベース - フルタイムキャスト
- **時給**: ¥3,000
- **勤務時間**: 6時間
- **待機時間**: 2時間
- **週の勤務日数**: 5日
- **月の固定費**: ¥120,000
- **結果**: 月収約¥454,000、貯金可能額約¥334,000

### ケース4：目標金額逆算 - マイホーム資金 🆕
- **目標金額**: ¥5,000,000
- **達成期間**: 12ヶ月
- **単価**: ¥10,000
- **1日の本数**: 3本
- **月の固定費**: ¥150,000
- **結果**: 必要な週の勤務日数 約5.8日、必要な月収約¥566,667、予想年収約¥6,800,000

---

## 🔧 今後の拡張案

### 未実装の機能

1. **プリセットボタンの追加**
   - UIに「初心者」「標準」「ハイクラス」ボタンを配置
   - ワンクリックで設定を適用

2. **履歴機能**
   - 過去の計算結果を保存
   - LocalStorageを使った履歴管理
   - 複数の条件を比較

3. **税金計算**
   - 確定申告のための税金概算
   - 所得税、住民税のシミュレーション

4. **経費管理**
   - 美容代、衣装代などの経費を記録
   - 実質的な手取り額を計算

5. **グラフの拡張**
   - 月別の収入推移グラフ（実績値入力）
   - 目標との比較グラフ

6. **時給ベースでの目標金額逆算**
   - 現在は本数ベースのみ対応
   - 時給ベースでも逆算できるように拡張

---

## 🌐 機能エントリーポイント

### メインページ
- **パス**: `index.html`
- **機能**: 収益計算フォーム、結果表示、グラフ表示、ダウンロード機能

### JavaScript関数
- `switchCalculationMode(mode)`: 計算モード切り替え
- `calculateEarnings()`: 収益・貯金計算のメイン関数
- `calculateGoal()`: 目標金額逆算のメイン関数 🆕
- `drawGoalChart()`: 目標達成グラフ描画関数 🆕
- `updateCharts()`: グラフ更新関数
- `updatePieChart()`: 円グラフ更新
- `updateBarChart()`: 棒グラフ更新
- `updateSavingsChart()`: 累積貯金グラフ更新
- `formatCurrency(amount)`: 通貨フォーマット関数
- `setupRealtimeCalculation()`: リアルタイム計算の初期化
- `downloadExcel()`: Excel出力関数
- `getCalculationData()`: 計算データ取得関数

---

## 📊 データモデル

### 入力データ（本数ベース）
```javascript
{
    pricePerSession: Number,  // 1本あたりの単価
    sessionsPerDay: Number,   // 1日の本数
    daysPerWeek: Number,      // 週の勤務日数
    livingCost: Number        // 月の固定費
}
```

### 入力データ（時給ベース）
```javascript
{
    hourlyRate: Number,       // 時給
    workHours: Number,        // 勤務時間
    waitingHours: Number,     // 待機時間
    daysPerWeek: Number,      // 週の勤務日数
    livingCost: Number        // 月の固定費
}
```

### 入力データ（目標金額逆算）🆕
```javascript
{
    goalAmount: Number,       // 目標金額
    goalMonths: Number,       // 達成期間（月）
    pricePerSession: Number,  // 1本あたりの単価
    sessionsPerDay: Number,   // 1日の本数
    livingCost: Number        // 月の固定費
}
```

### 出力データ（通常計算）
```javascript
{
    dailyEarnings: Number,        // 日給
    weeklyEarnings: Number,       // 週給
    monthlyBase: Number,          // 月給（基本）
    monthlyTotal: Number,         // 月収（手取り）
    yearlyEarnings: Number,       // 年収見込み
    savingsAmount: Number,        // 貯金可能額（月）
    monthlyWorkDays: Number       // 月の勤務日数
}
```

### 出力データ（目標金額逆算）🆕
```javascript
{
    requiredMonthlySavings: Number,   // 毎月の必要貯金額
    requiredMonthlyIncome: Number,    // 必要な月収
    dailyIncome: Number,              // 日給
    requiredDaysPerWeek: Number,      // 必要な週の勤務日数
    requiredDaysPerMonth: Number,     // 必要な月の勤務日数
    projectedYearlyIncome: Number     // 予想年収
}
```

---

## 💡 おすすめの次のステップ

1. **時給ベースでの目標金額逆算機能**
   - 時給・勤務時間・待機時間から目標達成に必要な勤務日数を逆算
   - 本数ベースと同様の逆算機能を時給ベースにも実装

2. **履歴保存機能の実装**
   - LocalStorageで計算結果を保存
   - 複数の条件を比較できるように

3. **プリセットボタンのUI実装**
   - HTMLに3つのプリセットボタンを追加
   - 既に関数は実装済み

4. **経費管理機能の追加**
   - 美容代、衣装代などの経費項目を追加
   - より正確な手取り額を計算

5. **税金シミュレーター**
   - 所得税・住民税の概算計算
   - 確定申告のサポート

---

## 📝 ライセンス

MIT License - 自由に改変・再配布可能です

---

## 🙏 謝辞

このプロジェクトは、風俗業界で働く全てのキャストさんが、より良い労働条件と収入を得られること、そして健全な貯蓄計画を立てられることを願って作成されました。

---

## 📞 サポート

質問や要望がある場合は、GitHubのIssuesでお知らせください。

---

**作成日**: 2025年12月4日  
**最終更新**: 2025年12月4日  
**バージョン**: 4.1.0  
**ステータス**: 🟢 Active Development

---

## 🆕 バージョン履歴

### v4.1.0 (2025-12-04) 🎨
- 💰 **すべての金額入力フィールドにカンマ区切り表示を実装**
- 🔢 **自動フォーマット機能**：入力時に自動的にカンマ区切りで表示
- 📊 **目標達成グラフの高さ最適化**（500万円〜1億円でも見やすく）
- 🎯 **Y軸を万円表記に対応**（100万円以上で自動的に万円単位で表示）
- 🎨 **入力フィールドのデザイン改善**（フォントサイズ・太さ・右寄せ表示）
- 📱 **スマホでのグラフはみ出し問題を修正**（レスポンシブ対応強化）
- 🔧 **対応フィールド**：目標金額、単価、時給、月の固定費すべてにカンマ区切り適用
- 🐛 **バグ修正**：Excelダウンロード時の貯金可能額が正しく表示されない問題を修正

### v4.0.0 (2025-12-04) 🎉
- ✨ **目標金額逆算機能を実装**
- ✨ **3つの計算方法に拡張**（本数ベース・時給ベース・目標金額逆算）
- ✨ **目標達成プラン表示機能**（必要な勤務条件を自動計算）
- ✨ **目標達成グラフ追加**（累積貯金と目標ラインの比較）
- ✨ **達成イメージ表示**（1ヶ月後、3ヶ月後、6ヶ月後の貯金額）
- 🎨 目標達成プランの専用UI追加
- 🔧 Excel出力に目標金額逆算モード対応
- 💰 **金額入力フィールドにカンマ区切り表示を実装**
- 📊 **目標達成グラフの高さ最適化**（高額目標でも見やすく）
- 🔢 **Y軸を万円表記に対応**（100万円以上で自動切替）

### v3.0.0 (2025-12-04)
- ✨ **2つの計算方法を実装**（本数ベース・時給ベース）
- ✨ **タブUIで計算方法を切り替え可能**
- ✨ **時給ベース計算追加**（待機時間対応）
- ✨ **Chart.jsでグラフ機能実装**（円グラフ・棒グラフ）
- 🔧 月の固定額を削除（固定費に統一）
- 🎨 グラフセクションのUIを追加

### v2.0.0 (2025-12-04)
- ✨ 生活費・貯金計算機能を追加
- ✨ PDF/Excel/Wordダウンロード機能を実装
- 🎨 固定費・貯金カードのUIを追加
- 🔧 本数ベース計算に完全移行

### v1.0.0 (2025-12-04)
- 🎉 初回リリース
- ✨ 基本的な本数ベース収益計算機能
- 🎨 レスポンシブデザイン実装
